"use strict";(self["webpackChunkvue_three"]=self["webpackChunkvue_three"]||[]).push([[856],{4856:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("div",[t("canvas",{ref:"three_container",attrs:{id:"three"}})])},o=[],s=(n(4114),n(9437)),r=n(7024),a=n(9777),h=(n(8250),n(4784),{data(){return{renderer:null,scene:null,camera:null,controls:null,v:null,material:null,points:null,clock:null,stats:null,animationId:null}},created(){},mounted(){this.stats=new a.A,this.clock=new s.zD7,document.body.appendChild(this.stats.domElement),this.start(),window.addEventListener("resize",this.onWindowResize)},beforeDestroy(){console.log("销毁了three"),cancelAnimationFrame(this.animationId);while(this.scene.children.length>0)this.scene.remove(this.scene.children[0]);this.scene.traverse((e=>{e.isMesh&&(e.geometry.dispose(),e.material.dispose())})),this.renderer.dispose(),this.renderer.forceContextLoss()},activated(){this.stats=new a.A,this.clock=new s.zD7,document.body.appendChild(this.stats.domElement),this.start(),window.addEventListener("resize",this.onWindowResize)},methods:{onWindowResize(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()},toThree1(){this.$router.push("/three1")},shader1(){const e="precision mediump float;\n      uniform float uTime;\n  varying vec2 vUv;\n  attribute float aSize;\n  attribute vec4 aShift;\n  varying vec3 vColor;\n\n  const float PI = 3.141592653589793238;\n\n  void main() {\n    vUv = uv;\n    vec3 color1 = vec3(227., 155., 0.);\n    vec3 color2 = vec3(100., 50., 255.);\n    // float d = fract(length(abs(position) / vec3(40., 10., 40.))*1000.0);\n    float d = length(abs(position) / vec3(40., 10., 40.));\n    d = clamp(d, 0., 1.);\n    vColor = mix(color1, color2, d) / 255.0;\n\n    vec3 transformed = position;\n  float theta = mod(aShift.x + aShift.z * uTime, PI * 2.);\n  float phi = mod(aShift.y + aShift.z * uTime, PI * 2.);\n  transformed += vec3(sin(phi) * cos(theta), cos(phi), sin(phi) * sin(theta)) * aShift.w;\n\n\n    vec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);\n    gl_PointSize = 50.0 / -mvPosition.z*aSize;\n    gl_Position = projectionMatrix * mvPosition;\n\n  }",t="  precision mediump float;\n      varying vec2 vUv;\n  varying vec3 vColor;\n\n  void main() {\n  //   float mask = step(length(gl_PointCoord - 0.5),0.5);\n  // if(mask < 0.5) discard;\n  // gl_FragColor = vec4(vColor, 1.0);\n\n  float d = length(gl_PointCoord - 0.5);\n  if (d > 0.5) discard;\n  gl_FragColor = vec4(vColor, smoothstep(1.0, 0.1, d));\n  }";this.material=new s.BKk({uniforms:{uTime:{value:0}},vertexShader:e,fragmentShader:t,transparent:!0,blending:s.EZo,depthTest:!1});const n=5e4,i=1e5,o=new s.LoY,r=[],a=[],h=[];for(let d=0;d<n+i;d++){let e=Math.random()*Math.PI*2,t=Math.acos(2*Math.random()-1),i=1.5*Math.random()+.5,o=(.9*Math.random()+.1)*Math.PI*.1,l=.9*Math.random()+.1;if(h.push(e,t,o,l),a.push(i),d<n){let e=.5*Math.random()+9.5,{x:t,y:n,z:i}=(new s.Pq0).randomDirection().multiplyScalar(e);r.push(t,n,i)}else{let e=10,t=40,n=Math.pow(Math.random(),1.5),i=Math.sqrt(t*t*n+(1-n)*e*e),{x:o,y:a,z:h}=(new s.Pq0).setFromCylindricalCoords(i,2*Math.random()*Math.PI,2*(Math.random()-.5));r.push(o,a,h)}}o.setAttribute("position",new s.qtW(r,3)),o.setAttribute("aSize",new s.qtW(a,1)),o.setAttribute("aShift",new s.qtW(h,4)),this.points=new s.ONl(o,this.material),this.points.rotation.order="ZYX",this.points.rotation.z=.2,this.scene.add(this.points)},initScene(){this.scene=new s.Z58,this.scene.background=new s.Q1f(1118481),this.scene.fog=new s.jUj(0,0,3e3)},initRenderer(){const e=document.querySelector("#three");this.renderer=new s.JeP({canvas:e,antialias:!0,alpha:!0}),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(15658734),document.body.appendChild(this.renderer.domElement)},initCamera(){this.camera=new s.ubm(45,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.set(30,8,30)},initControls(){this.controls=new r.N(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.autoRotate=!1,this.controls.enableZoom=!1,this.controls.enableRotate=!1,this.controls.enablePan=!1},initLight(){const e=new s.ZyN(15264491,.2);e.position.set(0,10,5),this.scene.add(e)},render(){if(!this.renderer)return;const e=this.clock.getElapsedTime();this.points.rotation.y=.01*e,this.material.uniforms.uTime.value=e,this.animationId=requestAnimationFrame(this.render),this.renderer.render(this.scene,this.camera),this.controls.update(),this.stats.update()},ownFun(){this.shader1()},start(){console.log("运行了start()"),this.initRenderer(),this.initScene(),this.initCamera(),this.initControls(),this.initLight(),this.ownFun(),this.render()}}}),d=h,l=n(1656),c=(0,l.A)(d,i,o,!1,null,"32419740",null),m=c.exports}}]);
//# sourceMappingURL=856.1aeace37.js.map